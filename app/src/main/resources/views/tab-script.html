<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<!-- Layout -->
<div th:fragment="tab" th:remove="tag">

    <!-- Script Templates -->
    <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">Quick Templates</label>
        <div class="flex flex-wrap gap-2">
            <button @click="loadTemplate('navigation')"
                    class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded text-sm transition-colors">
                <!--<i class="fas fa-compass mr-1"></i>Navigation-->
                <svg class="mr-1" fill="currentColor" height="24" viewBox="0 0 24 24" width="24">
                    <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM6.5 6.5C7.33 5.67 8.39 5.05 9.56 4.72L12 12L4.72 9.56C5.05 8.39 5.67 7.33 6.5 6.5ZM17.5 17.5C16.67 18.33 15.61 18.95 14.44 19.28L12 12L19.28 14.44C18.95 15.61 18.33 16.67 17.5 17.5Z"/>
                </svg>
                Navigation
            </button>
            <button @click="loadTemplate('form')"
                    class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded text-sm transition-colors">
                <!--<i class="fas fa-edit mr-1"></i>Form Interaction-->
                <svg class="mr-1" fill="currentColor" height="24" viewBox="0 0 24 24" width="24">
                    <path d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"/>
                </svg>
                Form Interaction
            </button>
            <button @click="loadTemplate('complex')"
                    class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded text-sm transition-colors">
                <!--<i class="fas fa-cog mr-1"></i>Complex Scenario-->
                <svg class="mr-1" height="16" viewBox="0 0 512 512" width="16">
                    <path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/>
                </svg>
                Complex Scenario
            </button>
            <button @click="loadTemplate('screenshot')"
                    class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded text-sm transition-colors">
                <!--<i class="fas fa-camera mr-1"></i>Screenshot-->
                <svg class="mr-1" height="16" viewBox="0 0 512 512" width="16">
                    <path d="M149.1 64.8L138.7 96H64C28.7 96 0 124.7 0 160V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H373.3L362.9 64.8C356.4 45.2 338.1 32 317.4 32H194.6c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/>
                </svg>
                Screenshot
            </button>
        </div>
    </div>

    <form @submit.prevent="executeScript()" class="space-y-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Groovy Script</label>
            <textarea
                    @input.debounce.300ms="backupValue('script', script)"
                    class="code-editor w-full h-64 px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
                    placeholder="// Enter your Groovy script here...&#10;driver.get('https://example.com')&#10;return [title: driver.getTitle()]"
                    x-model="script.code"></textarea>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Execution Timeout
                    (seconds)</label>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                       max="3600"
                       min="1"
                       type="number" x-model="script.timeout">
            </div>
            <div class="flex items-end">
                <button :disabled="!selectedSession || loading.executeScript"
                        class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 text-white font-semibold py-3 px-4 rounded-lg transition-all transform hover:scale-105"
                        type="submit">
                                        <span x-show="!loading.executeScript">
                                            <!--<i class="fas fa-play mr-2"></i>Execute Script-->
                                            <svg fill="currentColor" height="24" viewBox="0 0 24 24"
                                                 width="24" xmlns="http://www.w3.org/2000/svg">
                                              <!-- Play sign -->
                                              <path d="M6 5V19L18 12L6 5Z"/>
                                            </svg>Execute Script
                                        </span>
                    <span x-cloak x-show="loading.executeScript">
                        <!--<i class="fas fa-spinner fa-spin mr-2"></i>Executing...-->
                        <svg class="animate-spin mr-2" fill="currentColor" height="24" viewBox="0 0 24 24"
                             width="24">
                          <path d="M12 6V9L16 5L12 1V4C7.58 4 4 7.58 4 12C4 13.57 4.46 15.03 5.24 16.26L6.7 14.8C6.25 13.97 6 13 6 12C6 8.69 8.69 6 12 6ZM18.76 7.74L17.3 9.2C17.75 10.03 18 11 18 12C18 15.31 15.31 18 12 18V15L8 19L12 23V20C16.42 20 20 16.42 20 12C20 10.43 19.54 8.97 18.76 7.74Z"/>
                        </svg>Executing...
                    </span>
                </button>
            </div>
        </div>
    </form>

    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4" x-show="!selectedSession">
        <div class="flex items-center">
            <!--<i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>-->
            <svg class="text-yellow-600 mr-2" fill="currentColor" height="16"
                 viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L1.62 21H22.38L12 2ZM12 4.414L20.28 20H3.72L12 4.414Z"/>
                <path d="M11 10H13V15H11V10ZM11 16H13V18H11V16Z"/>
            </svg>
            <p class="text-yellow-800">Please select a session first to execute scripts.</p>
        </div>
    </div>

</div>
</body>
</html>